---
import "../styles/global.css";

interface Props {
  title: string;
}

import CustomCursor from "../components/CustomCursor.astro";
import TerminalOverlay from "../components/TerminalOverlay.astro";
const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="UNBRÃ˜L - Radical Subtraction based in Brussels."
    />
    <meta
      name="viewport"
      content="width=device-width"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="/favicon.svg"
    />
    <meta
      name="generator"
      content={Astro.generator}
    />
    <title>{title}</title>
    <link
      rel="preload"
      href="/fonts/archivo-black.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/jetbrains-mono.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
  </head>
  <body
    class="bg-graphite text-bone font-serif-human antialiased relative overflow-x-hidden min-h-screen"
  >
    <CustomCursor />
    <!-- 
			ZERO-JS STATE MANAGEMENT 
			We use hidden checkboxes and the adjacent sibling selector (~) to control global state.
		-->

    <!-- 1. Human/Machine Mode Toggle -->
    <input
      type="checkbox"
      id="toggle-mode"
      class="peer/mode hidden"
    />

    <!-- 2. Contact Overlay Toggle -->
    <input
      type="checkbox"
      id="toggle-contact"
      class="peer/contact hidden"
    />

    <!-- Persistent UI (Toggle, etc.) -->
    <slot name="ui" />

    <!-- Main Content Wrapper -->
    <div
      class="relative z-10 min-h-screen bg-micro-dots transition-opacity duration-300 peer-checked/mode:opacity-0 peer-checked/contact:blur-sm"
    >
      <slot />
    </div>

    <!-- Machine Layer (Visible only when #toggle-mode is checked) -->
    <div
      class="fixed inset-0 z-0 bg-black text-green-500 font-mono-machine p-8 overflow-auto opacity-0 pointer-events-none peer-checked/mode:opacity-100 peer-checked/mode:pointer-events-auto transition-opacity duration-300"
    >
      <!-- Only rendered when needed, but in Astro it's static HTML so it's always in DOM. -->
      <slot name="machine-layer" />
    </div>

    <!-- Contact Overlay (Visible when #toggle-contact is checked) -->
    <div
      class="fixed inset-0 z-50 transform translate-y-full peer-checked/contact:translate-y-0 transition-transform duration-500 ease-in-out bg-graphite/95 backdrop-blur-md"
    >
      <slot name="contact-overlay" />
    </div>

    <TerminalOverlay />
  </body>
</html>
